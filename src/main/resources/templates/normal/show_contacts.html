<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{normal/base :: layout(~{::section})}">

<head>
<meta charset="UTF-8">
<title>Show Contact</title>
</head>

<body>

<section>

<div class="card mr-3 ml-3">
<div class="card-body">

<h1 class="text-center">Your Contacts</h1>

<table class="table table-striped">

    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Image</th>
            <th>Name</th>  
            <th>Email</th>
            <th>Phone</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>

        <tr th:each="c : ${contacts.content}">

            <!-- ID -->
            <td th:text="${'SCMUSER' + c.cId}"></td>
            <!-- Image -->
			<td>
    <img th:src="${c.image == null || c.image == '' || c.image == 'null'} 
                  ? @{/img/contact.jpg} 
                  : @{/img/} + ${c.image}"
         class="my_profile_picture"
         style="height:50px; width:50px; border-radius:50%; object-fit:cover;">
</td>
            

            <!-- Name -->
            <td th:text="${c.name}"></td>

            <!-- Email -->
            <td>
			    <a th:href="@{/user/contact/{id}(id=${c.cId})}">
			        <span th:text="${c.email}"></span>
			    </a>
			</td>

            <!-- Phone -->
            <td th:text="${c.phone}"></td>

            <!-- Action Buttons -->
            <td>

                <!-- Update Button -->
                <a th:href="@{'/user/update-contact/' + ${c.cId}}"
                   class="btn btn-sm btn-primary">
                   Update
                </a>

                <!-- Delete Button -->
                <a th:href="@{'/user/delete-contact/' + ${c.cId}}"
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this contact?')">
                   Delete
                </a>

            </td>

        </tr>

    </tbody>

</table>

<!-- âœ… Dynamic Pagination -->
<nav aria-label="Page navigation example">

  <ul class="pagination justify-content-center">

    <!-- Previous Button -->
    <li class="page-item"
        th:classappend="${currentPage == 0} ? 'disabled'">

      <a class="page-link"
         th:href="@{'/user/show-contacts/' + ${currentPage-1}}">
         Previous
      </a>

    </li>


    <!-- Page Numbers -->
    <li class="page-item"
        th:each="i : ${#numbers.sequence(0, totalPages-1)}"
        th:classappend="${currentPage == i} ? 'active'">

        <a class="page-link"
           th:href="@{'/user/show-contacts/' + ${i}}"
           th:text="${i+1}">
        </a>

    </li>


    <!-- Next Button -->
    <li class="page-item"
        th:classappend="${currentPage == totalPages-1} ? 'disabled'">

      <a class="page-link"
         th:href="@{'/user/show-contacts/' + ${currentPage+1}}">
         Next
      </a>

    </li>

  </ul>

</nav>

</div>
</div>

</section>

</body>
</html>
